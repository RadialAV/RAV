<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radial AV - Electronic Music Collective [DEBUG]</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="AplicaÃ§Ã£o oficial do coletivo de mÃºsica eletrÃ´nica Radial AV">
    <meta name="theme-color" content="#1e90ff">
    
    <!-- Desativar TODOS os caches -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- CSS Modularizado -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/modals.css">
    
    <style>
        /* Banner de Debug */
        .debug-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            z-index: 10000;
            font-size: 14px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .debug-banner small {
            display: block;
            font-size: 11px;
            opacity: 0.9;
            margin-top: 3px;
        }
        
        /* Ajustar conteÃºdo para nÃ£o ficar atrÃ¡s do banner */
        .app-container {
            margin-top: 60px !important;
        }
    </style>
</head>
<body>
    <!-- Banner de Debug -->
    <div class="debug-banner">
        ğŸ”§ MODO DEBUG - SEM CACHE
        <small>Todos os scripts recarregam sempre â€¢ Service Worker desativado</small>
    </div>
    
    <div class="app-container">
        <header class="header">
            <div class="header-top">
                <div class="logo">
                    <h1>Radial AV</h1>
                    <p class="subtitle">ELECTRONIC MUSIC COLLECTIVE</p>
                </div>
            </div>
            <nav class="nav-container" id="nav-container">
                <button class="nav-btn active" onclick="showSection('home')">ğŸ  InÃ­cio</button>
                <button class="nav-btn" onclick="showSection('recent')">ğŸ•’ Recentes</button>
                <button class="nav-btn" onclick="showSection('favorites')">â¤ï¸ Favoritos</button>
                <button class="nav-btn" onclick="showSection('playlists')">ğŸ“ Playlists</button>
                <button class="nav-btn" onclick="showSection('releases')">ğŸ’¿ Releases</button>
                <button class="nav-btn" onclick="showSection('artists')">ğŸ‘¥ Artistas</button>
                <button class="nav-btn" onclick="showSection('videos')">ğŸ“¹ VÃ­deos</button>
                <button class="nav-btn" onclick="showSection('events')">ğŸª Eventos</button>
                <button class="nav-btn" onclick="showSection('news')">ğŸ“° NotÃ­cias</button>
                <button class="nav-btn" onclick="showSection('socials')">ğŸ“± Sociais</button>
            </nav>
        </header>

        <main class="main-content">
            <!-- PÃ¡gina Inicial -->
            <div id="home-section" class="section active">
                <div class="search-section">
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="ğŸ” Pesquisar mÃºsicas, artistas, releases..." 
                               oninput="performSearch(this.value)" onkeyup="handleSearchKeyup(event)">
                    </div>
                    
                    <div id="search-results" class="search-results">
                        <div class="track-grid" id="search-tracks"></div>
                    </div>
                    
                    <div id="random-tracks" class="track-grid">
                        <!-- MÃºsicas aleatÃ³rias serÃ£o carregadas aqui -->
                    </div>
                </div>

                <div class="events-section">
                    <div class="section-header">
                        <h3>ğŸª Eventos</h3>
                        <button class="view-all-btn" onclick="showSection('events')">Ver Todos</button>
                    </div>
                    <div class="events-list">
                        <div class="event-card">
                            <div class="event-info">
                                <h3>Radial @ Art Haus</h3>
                                <p class="event-date">15 Setembro 2024 â€¢ 23:00</p>
                            </div>
                            <button class="event-btn" onclick="openExternalLink('https://shotgun.live/en/venues/radial-av')">
                                Comprar Bilhetes
                            </button>
                        </div>
                        <div class="event-card">
                            <div class="event-info">
                                <h3>Radial Night Sessions</h3>
                                <p class="event-date">22 Setembro 2024 â€¢ 22:00</p>
                            </div>
                            <button class="event-btn" onclick="openExternalLink('https://shotgun.live/en/venues/radial-av')">
                                Comprar Bilhetes
                            </button>
                        </div>
                    </div>
                </div>

                <div class="news-section">
                    <div class="section-header">
                        <h3>ğŸ“° Ãšltimas NotÃ­cias</h3>
                        <button class="view-all-btn" onclick="showSection('news')">Ver Todas</button>
                    </div>
                    <div class="track-grid">
                        <div class="track-card">
                            <div class="track-cover">ğŸ“°</div>
                            <div class="track-info">
                                <div class="track-title">Novo Release R.A.V 02 em ProduÃ§Ã£o</div>
                                <div class="track-artist">Radial AV â€¢ HÃ¡ 2 dias</div>
                            </div>
                        </div>
                        <div class="track-card">
                            <div class="track-cover">ğŸª</div>
                            <div class="track-info">
                                <div class="track-title">Radial Night Sessions</div>
                                <div class="track-artist">Eventos â€¢ HÃ¡ 1 semana</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="socials-section">
                    <h2 class="section-title">ğŸ“± Segue-nos</h2>
                    <p class="section-subtitle">MantÃ©m-te atualizado com as nossas Ãºltimas novidades</p>
                    <div class="socials-grid">
                        <div class="social-card" onclick="openExternalLink('https://www.instagram.com/radial.av/?hl=en')">
                            <span class="social-icon">ğŸ“·</span>
                            <div class="social-name">Instagram</div>
                            <div class="social-handle">@radial.av</div>
                        </div>
                        <div class="social-card" onclick="openExternalLink('https://www.youtube.com/@RadialAV')">
                            <span class="social-icon">ğŸ“º</span>
                            <div class="social-name">YouTube</div>
                            <div class="social-handle">@RadialAV</div>
                        </div>
                        <div class="social-card" onclick="openExternalLink('https://radialav.github.io/info/')">
                            <span class="social-icon">ğŸŒ</span>
                            <div class="social-name">Website</div>
                            <div class="social-handle">radialav.github.io</div>
                        </div>
                        <div class="social-card" onclick="openExternalLink('https://shotgun.live/en/venues/radial-av')">
                            <span class="social-icon">ğŸ«</span>
                            <div class="social-name">Shotgun</div>
                            <div class="social-handle">Eventos</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recentes -->
            <div id="recent-section" class="section">
                <h2 class="section-title">ğŸ•’ Reproduzido Recentemente</h2>
                <div class="track-list" id="recent-tracks">
                    <!-- SerÃ¡ preenchido pelo JavaScript -->
                </div>
            </div>

            <!-- Favoritos -->
            <div id="favorites-section" class="section">
                <h2 class="section-title">â¤ï¸ Favoritos</h2>
                <div class="track-grid" id="favorites-tracks">
                    <!-- SerÃ¡ preenchido pelo JavaScript -->
                </div>
            </div>

            <!-- Playlists -->
            <div id="playlists-section" class="section">
                <div class="playlist-header">
                    <h2 class="section-title">ğŸ“ Playlists</h2>
                    <button class="create-playlist-btn" onclick="openCreatePlaylistModal()">â• Nova Playlist</button>
                </div>
                <div class="playlist-grid" id="playlists-grid">
                    <!-- SerÃ¡ preenchido pelo JavaScript -->
                </div>
            </div>

            <!-- Detalhes da Playlist -->
            <div id="playlist-details-section" class="section">
                <button class="back-btn" onclick="showSection('playlists')">â† Voltar Ã s Playlists</button>
                <div class="playlist-header">
                    <h2 class="section-title" id="playlist-details-title">ğŸ“ Playlist</h2>
                    <button class="play-playlist-btn" id="play-playlist-btn" onclick="playPlaylist()">â–¶ï¸ Tocar Playlist</button>
                </div>
                <div class="track-list" id="playlist-details-tracks">
                    <!-- SerÃ¡ preenchido pelo JavaScript -->
                </div>
            </div>

            <!-- Releases -->
            <div id="releases-section" class="section">
                <h2 class="section-title">ğŸ’¿ Releases</h2>
                <div class="track-grid" id="releases-grid">
                    <div class="track-card" onclick="showReleaseDetails('rav01')">
                        <div class="track-cover">R</div>
                        <div class="track-info">
                            <div class="track-title">R.A.V 01</div>
                            <div class="track-artist">12 faixas â€¢ 2024</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detalhes do Release -->
            <div id="release-details-section" class="section">
                <button class="back-btn" onclick="showSection('releases')">â† Voltar aos Releases</button>
                <h2 class="section-title" id="release-details-title">ğŸ’¿ R.A.V 01</h2>
                <div class="track-list" id="release-details-tracks">
                    <!-- SerÃ¡ preenchido pelo JavaScript -->
                </div>
            </div>

            <!-- Artistas -->
            <div id="artists-section" class="section">
                <h2 class="section-title">ğŸ‘¥ Artistas</h2>
                <div class="track-grid" id="artists-grid">
                    <!-- SerÃ¡ preenchido pelo JavaScript -->
                </div>
            </div>

            <!-- Detalhes do Artista -->
            <div id="artist-details-section" class="section">
                <button class="back-btn" onclick="showSection('artists')">â† Voltar aos Artistas</button>
                <h2 class="section-title" id="artist-details-title">ğŸ‘¥ Artista</h2>
                <div class="track-list" id="artist-details-tracks">
                    <!-- SerÃ¡ preenchido pelo JavaScript -->
                </div>
            </div>

            <!-- VÃ­deos -->
            <div id="videos-section" class="section">
                <h2 class="section-title">ğŸ“¹ VÃ­deos das Noites Radial</h2>
                <div class="videos-grid" id="videos-grid">
                    <!-- SerÃ¡ preenchido pelo JavaScript -->
                </div>
            </div>

            <!-- Eventos -->
            <div id="events-section" class="section">
                <div class="events-list" id="events-grid">
                    <div class="event-card">
                        <div class="event-info">
                            <h3>Radial @ Art Haus</h3>
                            <p class="event-date">15 Setembro 2024 â€¢ 23:00</p>
                        </div>
                        <button class="event-btn" onclick="openExternalLink('https://shotgun.live/en/venues/radial-av')">
                            Comprar Bilhetes
                        </button>
                    </div>
                    <div class="event-card">
                        <div class="event-info">
                            <h3>Radial Night Sessions</h3>
                            <p class="event-date">22 Setembro 2024 â€¢ 22:00</p>
                        </div>
                        <button class="event-btn" onclick="openExternalLink('https://shotgun.live/en/venues/radial-av')">
                            Comprar Bilhetes
                        </button>
                    </div>
                </div>
            </div>

            <!-- NotÃ­cias -->
            <div id="news-section" class="section">
                <h2 class="section-title">ğŸ“° NotÃ­cias</h2>
                <div class="track-grid" id="news-grid">
                    <div class="track-card">
                        <div class="track-cover">ğŸ“°</div>
                        <div class="track-info">
                            <div class="track-title">Novo Release R.A.V 02 em ProduÃ§Ã£o</div>
                            <div class="track-artist">Radial AV â€¢ HÃ¡ 2 dias</div>
                        </div>
                    </div>
                    <div class="track-card">
                        <div class="track-cover">ğŸª</div>
                        <div class="track-info">
                            <div class="track-title">Radial Night Sessions</div>
                            <div class="track-artist">Eventos â€¢ HÃ¡ 1 semana</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sociais -->
            <div id="socials-section" class="section">
                <h2 class="section-title">ğŸ“± Segue-nos</h2>
                <p class="section-subtitle">MantÃ©m-te atualizado com as nossas Ãºltimas novidades</p>
                <div class="socials-grid">
                    <div class="social-card" onclick="openExternalLink('https://www.instagram.com/radial.av/?hl=en')">
                        <span class="social-icon">ğŸ“·</span>
                        <div class="social-name">Instagram</div>
                        <div class="social-handle">@radial.av</div>
                    </div>
                    <div class="social-card" onclick="openExternalLink('https://www.youtube.com/@RadialAV')">
                        <span class="social-icon">ğŸ“º</span>
                        <div class="social-name">YouTube</div>
                        <div class="social-handle">@RadialAV</div>
                    </div>
                    <div class="social-card" onclick="openExternalLink('https://radialav.github.io/info/')">
                        <span class="social-icon">ğŸŒ</span>
                        <div class="social-name">Website</div>
                        <div class="social-handle">radialav.github.io</div>
                    </div>
                    <div class="social-card" onclick="openExternalLink('https://shotgun.live/en/venues/radial-av')">
                        <span class="social-icon">ğŸ«</span>
                        <div class="social-name">Shotgun</div>
                        <div class="social-handle">Eventos</div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Player de MÃºsica -->
        <div class="player" id="player">
            <div class="player-info" onclick="toggleExpandedPlayer()">
                <div class="player-cover" id="player-cover">S</div>
                <div class="player-details">
                    <div class="player-title" id="player-title">Simbaye</div>
                    <div class="player-artist" id="player-artist">Reu.Ven</div>
                </div>
            </div>
            <div class="player-controls">
                <button class="control-btn" onclick="previousTrack()">â®ï¸</button>
                <button class="control-btn play-pause" id="play-btn" onclick="togglePlay()">â¸ï¸</button>
                <button class="control-btn" onclick="nextTrack()">â­ï¸</button>
                <button class="control-btn shuffle" onclick="toggleShuffle()">ğŸ”€</button>
                <button class="control-btn repeat" onclick="toggleRepeat()">ğŸ”</button>
            </div>
            <div class="player-volume">
                <span>ğŸ”Š</span>
                <input type="range" class="volume-slider" min="0" max="100" value="70" onchange="setVolume(this.value)">
            </div>
            
            <!-- Barra de progresso (sÃ³ aparece no player expandido) -->
            <div class="progress-container">
                <div class="progress-bar" onclick="seekTo(event)">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-time">
                    <span id="current-time">0:00</span>
                    <span id="total-time">0:00</span>
                </div>
            </div>
            
            <button class="close-expanded" onclick="toggleExpandedPlayer()">âŒ„</button>
        </div>
    </div>

    <!-- Modal para Criar Playlist -->
    <div id="createPlaylistModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">â• Nova Playlist</h3>
                <button class="modal-close" onclick="closeCreatePlaylistModal()">Ã—</button>
            </div>
            <form onsubmit="createPlaylist(event)">
                <div class="form-group">
                    <label class="form-label">Nome da Playlist</label>
                    <input type="text" class="form-input" id="playlistName" placeholder="Ex: Minhas Favoritas" required>
                </div>
                <div class="form-group">
                    <label class="form-label">DescriÃ§Ã£o (opcional)</label>
                    <textarea class="form-textarea" id="playlistDescription" placeholder="Descreve a tua playlist..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeCreatePlaylistModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Criar Playlist</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Adicionar Ã  Playlist -->
    <div id="addToPlaylistModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">â• Adicionar Ã  Playlist</h3>
                <button class="modal-close" onclick="closeAddToPlaylistModal()">Ã—</button>
            </div>
            <div id="playlist-selection">
                <!-- SerÃ¡ preenchido pelo JavaScript -->
            </div>
        </div>
    </div>

    <!-- NotificaÃ§Ã£o Toast -->
    <div id="toast-container"></div>

    <!-- Scripts Modulares com Cache Busting -->
    <script>
        // Timestamp para forÃ§ar reload de scripts
        const timestamp = Date.now();
        
        // Desabilitar Service Worker em modo debug
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister();
                    console.log('ğŸ”§ [DEBUG] Service Worker desregistado');
                }
            });
        }
        
        console.log('ğŸ”§ [DEBUG MODE] - Todos os scripts recarregam sempre');
        console.log('ğŸ”§ Timestamp:', timestamp);
    </script>
    
    <!-- Scripts Modulares com Cache Busting -->
    <script>
        // Gerar timestamp Ãºnico para forÃ§ar reload
        const cacheBuster = Date.now();
        console.log('ğŸ”§ [DEBUG] Cache Buster:', cacheBuster);
    </script>
    
    <script type="module">
        // Adicionar timestamp a todos os imports
        const ts = Date.now();
        console.log('ğŸ”§ [DEBUG] Carregando mÃ³dulos com timestamp:', ts);
    </script>
    
    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/data.js"></script>
    <script type="module" src="js/ui/render.js"></script>
    <script type="module" src="js/player.js"></script>
    <script type="module" src="js/navigation.js"></script>
    <script type="module" src="js/sections/home.js"></script>
    <script type="module" src="js/sections/favorites.js"></script>
    <script type="module" src="js/sections/recent.js"></script>
    <script type="module" src="js/sections/playlists.js"></script>
    <script type="module" src="js/sections/releases.js"></script>
    <script type="module" src="js/sections/artists.js"></script>
    <script type="module" src="js/sections/videos.js"></script>
    <script type="module" src="js/app.js"></script>
    
    <!-- NÃƒO carregar SW em modo debug -->
</body>
</html>
